<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
        <meta name="description" content="JavaScript Playground" />
        <meta name="author" content="Marinduque State University" />
        <title>JavaScript Playground - MSU Admin</title>
        <link href="../css/styles.css" rel="stylesheet" />
        <link href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/codemirror.min.css" rel="stylesheet" />
        <link href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/theme/monokai.min.css" rel="stylesheet" />
        <script src="https://use.fontawesome.com/releases/v6.3.0/js/all.js" crossorigin="anonymous"></script>
        <style>
            :root {
                --apple-green: #4CAF50;
                --apple-green-dark: #388E3C;
            }
            
            .sb-topnav {
                background-color: var(--apple-green) !important;
            }
            .btn-primary {
                background-color: var(--apple-green);
                border-color: var(--apple-green);
            }
            .btn-primary:hover {
                background-color: var(--apple-green-dark);
                border-color: var(--apple-green-dark);
            }
            #editor-container {
                border: 1px solid #ddd;
                border-radius: 4px;
                margin-bottom: 1rem;
            }
            .CodeMirror {
                height: 400px !important;
                font-size: 14px;
            }
            #output-container {
                background: #f8f9fa;
                border: 1px solid #ddd;
                border-radius: 4px;
                padding: 1rem;
                min-height: 200px;
                max-height: 400px;
                overflow-y: auto;
            }
            .output-header {
                display: flex;
                justify-content: space-between;
                align-items: center;
                margin-bottom: 1rem;
            }
            .error {
                color: #dc3545;
                font-family: monospace;
                white-space: pre-wrap;
            }
            .console-output {
                font-family: monospace;
                white-space: pre-wrap;
            }
            .toolbar {
                padding: 0.5rem;
                background: #f8f9fa;
                border-bottom: 1px solid #ddd;
            }
            .sample-dropdown {
                max-width: 200px;
            }
        </style>
    </head>
    <body class="sb-nav-fixed">
        <nav class="sb-topnav navbar navbar-expand navbar-dark">
            <!-- Navbar Brand-->
            <a class="navbar-brand ps-3" href="../index.html">
                <img src="../assets/img/MARSU LOGO.png" alt="MSU Logo" height="40" class="me-2">
                MSU Admin
            </a>
            <!-- Sidebar Toggle-->
            <button class="btn btn-link btn-sm order-1 order-lg-0 me-4 me-lg-0" id="sidebarToggle" href="#!">
                <i class="fas fa-bars"></i>
            </button>
            <!-- Navbar-->
            <ul class="navbar-nav ms-auto me-3 me-lg-4">
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" id="navbarDropdown" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                        <i class="fas fa-user fa-fw"></i>
                    </a>
                    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="navbarDropdown">
                        <li><a class="dropdown-item" href="#!">Profile Settings</a></li>
                        <li><a class="dropdown-item" href="#!">Activity Log</a></li>
                        <li><hr class="dropdown-divider" /></li>
                        <li><a class="dropdown-item" href="../index.html">Logout</a></li>
                    </ul>
                </li>
            </ul>
        </nav>
        <div id="layoutSidenav">
            <div id="layoutSidenav_nav">
                <nav class="sb-sidenav accordion sb-sidenav-dark" id="sidenavAccordion">
                    <div class="sb-sidenav-menu">
                        <div class="nav">
                            <div class="sb-sidenav-menu-heading">Main</div>
                            <a class="nav-link" href="dashboard.html">
                                <div class="sb-nav-link-icon"><i class="fas fa-tachometer-alt"></i></div>
                                Dashboard
                            </a>
                            <div class="sb-sidenav-menu-heading">Academic</div>
                            <a class="nav-link" href="students.html">
                                <div class="sb-nav-link-icon"><i class="fas fa-graduation-cap"></i></div>
                                Students
                            </a>
                            <a class="nav-link" href="faculty.html">
                                <div class="sb-nav-link-icon"><i class="fas fa-chalkboard-teacher"></i></div>
                                Faculty
                            </a>
                            <a class="nav-link" href="courses.html">
                                <div class="sb-nav-link-icon"><i class="fas fa-book"></i></div>
                                Courses
                            </a>
                            <div class="sb-sidenav-menu-heading">Learning</div>
                            <a class="nav-link" href="javascript-guide.html">
                                <div class="sb-nav-link-icon"><i class="fab fa-js"></i></div>
                                JavaScript Guide
                            </a>
                            <a class="nav-link active" href="javascript-playground.html">
                                <div class="sb-nav-link-icon"><i class="fas fa-code"></i></div>
                                JavaScript Playground
                            </a>
                        </div>
                    </div>
                    <div class="sb-sidenav-footer">
                        <div class="small">Logged in as:</div>
                        Administrator
                    </div>
                </nav>
            </div>
            <div id="layoutSidenav_content">
                <main>
                    <div class="container-fluid px-4">
                        <h1 class="mt-4">JavaScript Playground</h1>
                        <ol class="breadcrumb mb-4">
                            <li class="breadcrumb-item"><a href="dashboard.html">Dashboard</a></li>
                            <li class="breadcrumb-item active">JavaScript Playground</li>
                        </ol>

                        <div class="row">
                            <div class="col-xl-12">
                                <div class="card mb-4">
                                    <div class="card-header d-flex justify-content-between align-items-center">
                                        <div>
                                            <i class="fas fa-code me-1"></i>
                                            Code Editor
                                        </div>
                                        <div class="d-flex gap-2">
                                            <select class="form-select sample-dropdown" id="codeExamples">
                                                <option value="">Select an example...</option>
                                                <option value="hello">Hello World</option>
                                                <option value="loops">Loops Example</option>
                                                <option value="functions">Functions Example</option>
                                                <option value="dom">DOM Manipulation</option>
                                            </select>
                                            <button class="btn btn-primary" onclick="runCode()">
                                                <i class="fas fa-play me-1"></i>Run Code
                                            </button>
                                            <button class="btn btn-secondary" onclick="clearOutput()">
                                                <i class="fas fa-eraser me-1"></i>Clear Output
                                            </button>
                                        </div>
                                    </div>
                                    <div class="card-body">
                                        <div id="editor-container">
                                            <textarea id="code-editor">// Write your JavaScript code here
console.log("Hello, World!");</textarea>
                                        </div>
                                        <div class="output-header">
                                            <h5 class="mb-0"><i class="fas fa-terminal me-2"></i>Output</h5>
                                        </div>
                                        <div id="output-container">
                                            <div id="output" class="console-output"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </main>
                <footer class="py-4 bg-light mt-auto">
                    <div class="container-fluid px-4">
                        <div class="d-flex align-items-center justify-content-between small">
                            <div class="text-muted">Copyright &copy; Marinduque State University 2025</div>
                            <div>
                                <a href="#">Privacy Policy</a>
                                &middot;
                                <a href="#">Terms &amp; Conditions</a>
                            </div>
                        </div>
                    </div>
                </footer>
            </div>
        </div>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
        <script src="../js/scripts.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/codemirror.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/mode/javascript/javascript.min.js"></script>
        <script>
            // Initialize CodeMirror
            var editor = CodeMirror.fromTextArea(document.getElementById("code-editor"), {
                mode: "javascript",
                theme: "monokai",
                lineNumbers: true,
                autoCloseBrackets: true,
                matchBrackets: true,
                indentUnit: 4,
                tabSize: 4,
                lineWrapping: true,
                foldGutter: true,
                gutters: ["CodeMirror-linenumbers", "CodeMirror-foldgutter"],
                extraKeys: {
                    "Ctrl-Space": "autocomplete"
                }
            });

            // Code examples
            const codeExamples = {
                hello: `// Simple Hello World
console.log("Hello, World!");

// Using variables
let name = "Student";
console.log(\`Welcome, \${name}!\`);`,

                loops: `// Different types of loops
console.log("For Loop:");
for (let i = 0; i < 5; i++) {
    console.log(\`Count: \${i}\`);
}

console.log("\\nWhile Loop:");
let count = 0;
while (count < 3) {
    console.log(\`Count is: \${count}\`);
    count++;
}

console.log("\\nForEach on Array:");
const fruits = ["Apple", "Banana", "Orange"];
fruits.forEach(fruit => console.log(fruit));`,

                functions: `// Regular function
function greet(name) {
    return \`Hello, \${name}!\`;
}

// Arrow function
const add = (a, b) => a + b;

// Using the functions
console.log(greet("Student"));
console.log(\`2 + 3 = \${add(2, 3)}\`);

// Function with callback
function processUser(callback) {
    let user = "John";
    callback(user);
}

processUser(name => console.log(\`Processed user: \${name}\`));`,

                dom: `// Create a new element
const div = document.createElement('div');
div.textContent = 'New Element';
div.style.color = 'blue';

// Add it to the output
document.getElementById('output').appendChild(div);

// Create a button
const btn = document.createElement('button');
btn.textContent = 'Click Me';
btn.onclick = () => alert('Button clicked!');
document.getElementById('output').appendChild(btn);`
            };

            // Load example code
            document.getElementById('codeExamples').addEventListener('change', function(e) {
                const example = e.target.value;
                if (example && codeExamples[example]) {
                    editor.setValue(codeExamples[example]);
                }
            });

            // Run the code
            function runCode() {
                const outputDiv = document.getElementById('output');
                outputDiv.innerHTML = ''; // Clear previous output

                // Create a new scope for console.log
                const originalLog = console.log;
                console.log = function(...args) {
                    const output = args.map(arg => {
                        if (typeof arg === 'object') {
                            return JSON.stringify(arg, null, 2);
                        }
                        return String(arg);
                    }).join(' ');
                    
                    outputDiv.innerHTML += output + '\n';
                };

                try {
                    // Get the code and execute it
                    const code = editor.getValue();
                    eval(code);
                } catch (error) {
                    outputDiv.innerHTML += `<span class="error">${error}</span>`;
                }

                // Restore original console.log
                console.log = originalLog;
            }

            // Clear the output
            function clearOutput() {
                document.getElementById('output').innerHTML = '';
            }
        </script>
    </body>
</html>